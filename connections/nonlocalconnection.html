<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The Non-Local Connection &mdash; AP Command 2013.08.15 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.4/spacelab/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2013.08.15',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="AP Command 2013.08.15 documentation" href="../index.html" />
    <link rel="up" title="Developer Documentation" href="../documentation/developer/index.html" />
    <link rel="next" title="apcommand.connections.nonlocalconnection.NonLocalConnection" href="api/apcommand.connections.nonlocalconnection.NonLocalConnection.html" />
    <link rel="prev" title="apcommand.connections.localconnection.LocalConnection" href="api/apcommand.connections.localconnection.LocalConnection.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          AP Command</a>
        <span class="navbar-text navbar-version pull-left"><b>2013.08.15</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../documentation/user/index.html">User Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../documentation/developer/index.html">Developer Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html">Readme</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">The Non-Local Connection</a><ul>
<li><a class="reference internal" href="#the-nonlocalconnection">The NonLocalConnection</a></li>
<li><a class="reference internal" href="#the-nonlocalconnectionbuilder">The NonLocalConnectionBuilder</a></li>
<li><a class="reference internal" href="#connectionparameters">ConnectionParameters</a></li>
<li><a class="reference internal" href="#testing-the-nonlocalconnection">Testing the NonLocalConnection</a></li>
<li><a class="reference internal" href="#testing-the-nonlocalconnectionbuilder">Testing the NonLocalConnectionBuilder</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="api/apcommand.connections.localconnection.LocalConnection.html" title="Previous Chapter: apcommand.connections.localconnection.LocalConnection"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; apcommand.con...</span>
    </a>
  </li>
  <li>
    <a href="api/apcommand.connections.nonlocalconnection.NonLocalConnection.html" title="Next Chapter: apcommand.connections.nonlocalconnection.NonLocalConnection"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">apcommand.con... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/connections/nonlocalconnection.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="the-non-local-connection">
<h1>The Non-Local Connection<a class="headerlink" href="#the-non-local-connection" title="Permalink to this headline">¶</a></h1>
<p>The Non-Local Connection is a Base for non-local connectionS (e.g. SSH or Telnet).</p>
<p>Calls to a NonLocalConnection takes the command-line command as a property and the arguments to the command as parameters. For example, if the command is <code class="docutils literal"><span class="pre">ps</span></code> and the argument is <code class="docutils literal"><span class="pre">-e</span></code> then a connection would be called like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">output</span><span class="p">,</span> <span class="n">error</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">ps</span><span class="p">(</span><span class="s1">&#39;-e&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">output</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">line</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">output</span></code> and <code class="docutils literal"><span class="pre">error</span></code> are actually unpacking the <span class="xref std std-ref">OutputError</span> namedtuple defined in the <cite>localconnection</cite> module. An alternative way to make the same call would be:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">output_error</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">ps</span><span class="p">(</span><span class="s1">&#39;-e&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">output_error</span><span class="o">.</span><span class="n">output</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">line</span>
</pre></div>
</div>
<p>Although the dot-notation is the primary interface, there are cases where the command contains a dot (e.g. <cite>wifi.sh</cite>) which renders it unusable. For those cases you can use the <code class="docutils literal"><span class="pre">__call__</span></code> method instead:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">output</span><span class="p">,</span> <span class="n">error</span> <span class="o">=</span> <span class="n">connection</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="s1">&#39;wifi.sh&#39;</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="s1">&#39;status&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>The <cite>__call__</cite> is actually an alias for the <cite>_procedure_call</cite> method, but is provided to to keep the interface more consistent with other classes in the package, and hopefully reduce the likelihood of error caused by having to remember the name of the method (I never can).</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="api/apcommand.connections.nonlocalconnection.NonLocalConnection.html#apcommand.connections.nonlocalconnection.NonLocalConnection" title="apcommand.connections.nonlocalconnection.NonLocalConnection"><code class="xref py py-obj docutils literal"><span class="pre">NonLocalConnection</span></code></a>(hostname,&nbsp;username[,&nbsp;...])</td>
<td>A non-local connection is the base for non-local connections</td>
</tr>
</tbody>
</table>
<p>The primary features the <cite>NonLocalConnection</cite> adds to children that inherit from it are the setting of a command prefix (based on the <cite>PATH</cite> and <cite>LD_LIBRARY_PATH</cite> variables) and the dot-notation interface. Additionally, since it inherits from the <span class="xref std std-ref">BaseClass</span> all children have a <cite>logger</cite> attribute.</p>
<div class="section" id="the-nonlocalconnection">
<span id="non-local-connection"></span><h2>The NonLocalConnection<a class="headerlink" href="#the-nonlocalconnection" title="Permalink to this headline">¶</a></h2>
<p class="plantuml">
<img src="../_images/plantuml-83704865c6a85d941c282264b9c1b8025429e880.png" alt="NonLocalConnection -|&gt; BaseClass
BaseClass : logger
NonLocalConnection : hostname
NonLocalConnection : username
NonLocalConnection : password
NonLocalConnection : command_prefix
NonLocalConnection : operating_system
NonLocalConnection: path
NonLocalConnection : library_path
NonLocalConnection : lock
NonLocalConnection o-- threading.RLock
NonLocalConnection : __getattr__(command)
NonLocalConnection : __call__(command, arguments)" />
</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The port is not set in the <cite>NonLocalConnection</cite> so that child-classes can set a default port number for themselves.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Because the <code class="docutils literal"><span class="pre">_getattr__</span></code> is defined, children of this class need to be aware that if a user of the child-class tries to get a property that was not defined in the class they will <em>not</em> get an <a class="reference external" href="http://docs.python.org/2/reference/expressions.html#attribute-references">AttributeError</a> but will instead get the <code class="docutils literal"><span class="pre">__getattr__</span></code> method returned. e.g. if you did not define <code class="docutils literal"><span class="pre">SSHConnection.nickname</span></code> but a user tried to retrieve it &#8211; <code class="docutils literal"><span class="pre">nick</span> <span class="pre">=</span> <span class="pre">connection.nickname</span></code> &#8211; the <code class="docutils literal"><span class="pre">nick</span></code> variable would now contain a reference to <code class="docutils literal"><span class="pre">connection.__getattr__</span></code> which might not be what was expected.</p>
</div>
</div>
<div class="section" id="the-nonlocalconnectionbuilder">
<h2>The NonLocalConnectionBuilder<a class="headerlink" href="#the-nonlocalconnectionbuilder" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="api/apcommand.connections.nonlocalconnection.NonLocalConnectionBuilder.html#apcommand.connections.nonlocalconnection.NonLocalConnectionBuilder" title="apcommand.connections.nonlocalconnection.NonLocalConnectionBuilder"><code class="xref py py-obj docutils literal"><span class="pre">NonLocalConnectionBuilder</span></code></a>()</td>
<td>A base-plugin class for non-local connections</td>
</tr>
</tbody>
</table>
<p class="plantuml">
<img src="../_images/plantuml-33d164728f8457c7150a8c79c029645c0d2287ab.png" alt="NonLocalConnectionBuilder o-- logging.Logger
NonLocalConnectionBuilder : parameters
NonLocalConnectionBuilder : product
NonLocalConnectionBuilder : _logger" />
</p>
</div>
<div class="section" id="connectionparameters">
<h2>ConnectionParameters<a class="headerlink" href="#connectionparameters" title="Permalink to this headline">¶</a></h2>
<p>This is a named-tuple to pass parameters to the non-local-connection.</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="api/apcommand.connections.nonlocalconnection.ConnectionParameters.html#apcommand.connections.nonlocalconnection.ConnectionParameters" title="apcommand.connections.nonlocalconnection.ConnectionParameters"><code class="xref py py-obj docutils literal"><span class="pre">ConnectionParameters</span></code></a>(hostname,&nbsp;username,&nbsp;...)</td>
<td></td>
</tr>
</tbody>
</table>
<p class="plantuml">
<img src="../_images/plantuml-4f86524d1a0736f69a2806a3bc44797cc4dafa09.png" alt="ConnectionParameters -|&gt; collections.namedtuple
ConnectionParameters : hostname
ConnectionParameters : username
ConnectionParameters : password
ConnectionParameters : operating_system
ConnectionParameters : path
ConnectionParameters : library_path
ConnectionParameters : port" />
</p>
</div>
<div class="section" id="testing-the-nonlocalconnection">
<h2>Testing the NonLocalConnection<a class="headerlink" href="#testing-the-nonlocalconnection" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="api/apcommand.connections.nonlocalconnection.TestNonLocalConnection.test_main.html#apcommand.connections.nonlocalconnection.TestNonLocalConnection.test_main" title="apcommand.connections.nonlocalconnection.TestNonLocalConnection.test_main"><code class="xref py py-obj docutils literal"><span class="pre">TestNonLocalConnection.test_main</span></code></a>(*arg,&nbsp;**kw)</td>
<td>Does it raise an error if the main method isn&#8217;t implemented?</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="api/apcommand.connections.nonlocalconnection.TestNonLocalConnection.test_add_path.html#apcommand.connections.nonlocalconnection.TestNonLocalConnection.test_add_path" title="apcommand.connections.nonlocalconnection.TestNonLocalConnection.test_add_path"><code class="xref py py-obj docutils literal"><span class="pre">TestNonLocalConnection.test_add_path</span></code></a>()</td>
<td>If the path and/or library paths are set, does it add them to the command?</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="api/apcommand.connections.nonlocalconnection.TestNonLocalConnection.test_getattr.html#apcommand.connections.nonlocalconnection.TestNonLocalConnection.test_getattr" title="apcommand.connections.nonlocalconnection.TestNonLocalConnection.test_getattr"><code class="xref py py-obj docutils literal"><span class="pre">TestNonLocalConnection.test_getattr</span></code></a>()</td>
<td>Does it add the path to the command then call _procedure_call()?</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="api/apcommand.connections.nonlocalconnection.TestNonLocalConnection.test_command_prefix.html#apcommand.connections.nonlocalconnection.TestNonLocalConnection.test_command_prefix" title="apcommand.connections.nonlocalconnection.TestNonLocalConnection.test_command_prefix"><code class="xref py py-obj docutils literal"><span class="pre">TestNonLocalConnection.test_command_prefix</span></code></a>()</td>
<td>If the command_prefix is set, does it add it to the command?</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="testing-the-nonlocalconnectionbuilder">
<h2>Testing the NonLocalConnectionBuilder<a class="headerlink" href="#testing-the-nonlocalconnectionbuilder" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="api/apcommand.connections.nonlocalconnection.TestNonLocalConnectionBuilder.test_product.html#apcommand.connections.nonlocalconnection.TestNonLocalConnectionBuilder.test_product" title="apcommand.connections.nonlocalconnection.TestNonLocalConnectionBuilder.test_product"><code class="xref py py-obj docutils literal"><span class="pre">TestNonLocalConnectionBuilder.test_product</span></code></a>(...)</td>
<td>Does the product raise an error if not re-implemented?</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="api/apcommand.connections.nonlocalconnection.TestNonLocalConnectionBuilder.test_attributes.html#apcommand.connections.nonlocalconnection.TestNonLocalConnectionBuilder.test_attributes" title="apcommand.connections.nonlocalconnection.TestNonLocalConnectionBuilder.test_attributes"><code class="xref py py-obj docutils literal"><span class="pre">TestNonLocalConnectionBuilder.test_attributes</span></code></a>()</td>
<td>Does the builder have the attributes promised by the API?</td>
</tr>
</tbody>
</table>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013, russelln.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.<br/>
    </p>
  </div>
</footer>
  </body>
</html>